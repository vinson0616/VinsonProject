{% extends 'base.html' %}
{% load static %}
{% block title %}{{ system.company.company_name }}-资源素材列表{% endblock %}
{% block custom_css %}
    <link href="{% static 'css/navigation.css' %}" rel="stylesheet">
{% endblock %}
{% block content %}
    <div id="site-banner" class="text-center clearfix">
        <div class="container">
            <h1 class="title wow slideInLeft">{{library.name}}</h1>
            <ol class="breadcrumb wow slideInRight">
                <li><a href="{% url 'index' %}">首页</a></li>
                <li class="active">素材下载</li>
            </ol>
        </div>
    </div>
    <section id="property-listing" style="margin-top: -100px;">
        <div class="container section-layout">
            <div class="course-nav-box">
                <div class="course-nav-row clearfix">
                    <span class="hd l">方向：</span>
                    <div class="bd">
                        <ul class="">
                            <li class="course-nav-item {% ifequal p_id -1 %}on{% endifequal %}">
                                <a class="course-nav-row-header-nav" href="?p_id=-1&c_id=-1&s_id=-1">全部</a>
                            </li>
                            {% for parent_category in parent_categories %}
                                <li class="course-nav-item {% ifequal p_id parent_category.id %}on{% endifequal %}">
                                    <a class="course-nav-row-header-nav" href="?p_id={{ parent_category.id }}&c_id=-1&s_id=-1">{{parent_category.name}}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="course-nav-row course-nav-skills clearfix">
                    <div class="js-course-skills course-skills-box">
                        <span class="hd l">分类：</span>
                        <div class="bd">
                            <ul class="">
                                <li class="course-nav-item {% ifequal c_id -1 %}on{% endifequal %}">
                                    <a href="?p_id={{ p_id }}&c_id=-1&s_id=-1">全部</a>
                                </li>
                                {% for child_category in second_categories %}
                                    <li class="course-nav-item {% ifequal c_id child_category.id %}on{% endifequal %}">
                                        <a href="?p_id={{ child_category.parent_category.id }}&c_id={{ child_category.id }}&s_id=-1">{{child_category.name}}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="course-nav-row course-nav-skills clearfix">
                    <div class="js-course-skills course-skills-box">
                        <span class="hd l">子类别：</span>
                        <div class="bd">
                            <ul class="">
                                <li class="course-nav-item {% ifequal s_id -1 %}on{% endifequal %}">
                                    <a href="?p_id={{ p_id }}&c_id={{c_id}}&s_id=-1">全部</a>
                                </li>
                                {% for third_category in third_categories %}
                                    <li class="course-nav-item {% ifequal s_id third_category.id %}on{% endifequal %}">
                                        <a href="?p_id={{ third_category.parent_category.parent_category.id }}&c_id={{ third_category.parent_category.id }}&s_id={{ third_category.id }}">{{third_category.name}}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <header class="section-header text-center">
            <div class="container">
                <div class="pull-left">
                     <div style="width: 319px; height: 50px; ">
                        <div style="margin-top: 15px;" class="wrapperLibrary">
                            <input  id="search_keywords2" type="text" name="search_keywords2" />
                            <a id="jsSearchBtn2" href="javascript:;"></a>
                        </div>
                    </div>
                </div>
                <div class="pull-right">
                    <div class="property-sorting pull-left">
                        <label for="property-sort-dropdown"> 排序:   </label>
                        <select name="property-sort-dropdown" id="property-sort-dropdown">
                            <option value="">按发布时间顺序</option>
                            {#                            <option value="by_date">By date</option>#}
                            {#                            <option value="by_price">By price</option>#}
                        </select>
                    </div>
                    <p class="pull-left layout-view"> 视图: <i class="fa fa-th selected" data-layout="4"></i> <i class="fa fa-th-large" data-layout="6"></i><i class="fa fa-list-ul" data-layout="12"></i> </p>
                </div>
            </div>
        </header>
        <div class="container section-layout">
            <div class="row">
                {% for library in all_libraryMedias.object_list %}
                    <div class="col-lg-4 col-sm-6 layout-item-wrap">
                        <article class="property layout-item clearfix">
                            <figure class="feature-image">
                                <a class="clearfix zoom" href="{% url 'library:detail' library.id %}">
                                    <img data-action="zoom" width="350px" height="233px" src="{% if library.image %}{{MEDIA_URL}}{{ library.image }}{% else %}{% static 'images/property/1.jpg' %}{% endif %}" alt="{{library.name}}">
                                </a>
                                <span class="btn btn-warning btn-sale">{{library.category.parent_category.name}}</span>
                            </figure>
                            <div class="property-contents clearfix">
                                <header class="property-header clearfix">
                                    <div class="pull-left">
                                        <h6 class="entry-title"><a href="{% url 'library:detail' library.id %}">{{library.name|slice:':16'}}</a></h6>
                                        <span class="property-location"><i class="fa fa-map-marker"></i> {{ library.category.parent_category.name }}->{{ library.category.name }}</span>
                                    </div>
                                    {% if request.user.is_authenticated %}
                                        <a class="btn btn-default btn-price pull-right btn-3d" href="{% if library.download %}{{ MEDIA_URL }}{{ library.download }}{% else %}{{ library.url }}{% endif %}" target="_blank" download="" data-hover="免费下载"><strong>免费下载</strong></a>
                                    {% else %}
                                        <a class="btn btn-warning btn-price pull-right btn-4d" href="{% url 'users:login' %}"  data-hover="请登录"><strong>请登录</strong></a>
                                    {% endif %}
                                </header>
                                <div class="property-meta clearfix">
                                    <span><i class="fa fa-user"></i> {{library.click_nums}}</span>
                                    <span><i class="fa fa-download"></i> 120 </span>
                                </div>
                            </div>
                        </article>
                    </div>
                {% endfor %}
            </div>


            <ul id="pagination" class="text-center clearfix">
                {% if all_libraryMedias.has_previous %}
                    <li class="long"><a
                            href="?{{ all_libraryMedias.previous_page_number.querystring }}">上一页</a></li>
                {% else %}
                    <li class="disabled">
                        <a href="#">上一页</a>
                    </li>
                {% endif %}
                {% for page in all_libraryMedias.pages %}
                    {% if page %}
                        {% ifequal page all_libraryMedias.number %}
                            <li class="active"><a style="background: #6c98e1;color: white;" href="?{{ page.querystring }}">{{ page }}</a></li>
                        {% else %}
                            <li><a href="?{{ page.querystring }}">{{ page }}</a></li>
                        {% endifequal %}
                    {% else %}
                        <li><a href="" class="none">...</a></li>
                    {% endif %}
                {% endfor %}
                {% if all_libraryMedias.has_next %}
                    <li class="long"><a href="?{{ all_libraryMedias.next_page_number.querystring }}">下一页</a>
                    </li>
                {% else %}
                    <li class="disabled">
                        <a href="#">下一页</a>
                    </li>
                {% endif %}

            </ul>
        </div>
    </section>
{% endblock %}
{% block custom_js %}
<script type="text/javascript">
    //添加评论
    $('#jsSearchBtn2').on('click', function(){
        var content = $("#search_keywords2").val()
        window.location.href="?searchContent="+ content

    });

     $('#search_keywords2').bind('keyup', function(event) {
        if (event.keyCode == "13") {
            //回车执行查询
            $('#jsSearchBtn2').click();
        }
    });

</script>
{% endblock %}